## 가설검증의 원리 ##
가설검정 = p값이라는 수치 계산하여 가설 지지하는지 여부 판단

### 가설 검증하기 ###

<img width="835" height="612" alt="image" src="https://github.com/user-attachments/assets/3e00e4b6-8b15-4e40-97a5-f8e7c332f400" />

**확증적 자료분석** : 미리 세운 가설을 검증하는 접근법
**탐색적 자료분석** : 가설을 미리 세우지 않고, 전체 데이터를 탐색적으로 해석하는 접근법으로 이는 데이터의 특징이나 경향 파악하거나, 가설 후부 찾는 것을 목적으로 하는 데이터 분석

### 가설검정 ###
**가설검정** : 데이터에 기반을 둔 통계 가설을 검증하는 방법
'신약에 효과가 있다'라는 가설을 세우고 이를 검증하는 예시
비교한다는 것은 2개 이상의 집단이 있다는 뜻인데 통계학에서는 특정 동일 조건인 집단을 **군**
**대조군** : 어떠한 조치를 취한 집단을 실험군, 실험군과 비교 대조를 위해 마련한 집단
신약을 투여한 모집단A와 위약을 투여한 모집단B의 평균ㅄ이 서로 다르면 효과가 있음

### 귀무가설과 대립가설 ###
**귀무가설** : 밝히고자 하는 가설의 부정 명제로 '신약에 효과가 없다'
**대립가설** : 밝히고 싶은 가설 '신약에 효과가 있다'
가설검정에서 상정한 가설인 '신약에 효과가 있다'를 확인하고자 그 부정 명제인 귀무가설을 세우고, 귀무가설이 틀렸음을 주장하는 것으로 대립가설을 지지
귀무가설과 대립가설에서 비대칭성이 있으므로 대립가설을 부정하여 귀무가설 지지하는 것은 불가능

### 모집단과 표본의 관계 다시 살펴보기 ###
귀무가설이 옳다 하더라도 표본평균 A와 표본평균 B가 같지 않다는 것을 알 수 있음
표본평균의 차이가 귀무가설이 옳을 때도 생기는 단순한 데이터 퍼짐인지 아니면 정말로 약의 효과인지를 구별할 필요가 있는 사고방식이 가설검정의 바탕

<img width="840" height="500" alt="image" src="https://github.com/user-attachments/assets/8067b3e6-57b1-477b-9523-c428d304ed2a" />

### 귀무가설이 옳은 세계 상상하기 ###
일단 귀무가설이 옳다고 가정 후 모집단A와 모집단B에서 각각 표본 추출
여러 번 반복 후 표본평균 차이를 히스토그램으로 그림으로 귀무가설이 옳은 세계에서 표본평균의 차이가 확률적으로 어떻게 생기는지 나타낸 분포

#### P값 ####
현실의 값은 귀무가설이 옳은 가상 세계에서는 어떤 빈도로 발생?이 가설검정에서 가장 중요한 사고 방식
현실에서 얻은 데이터가 귀무가설이 옳은 가상 세계에서는 얼마나 나타나기 쉬운가 또는 어려운가를 평가하기 위해 p값 계산함
이는 확률이므로 0 이상 1 이하의 값이 나오고 이 값이 작다는 것은 귀무가설이 옳은 세계에서는 현실에서 얻은 데이터가 잘 나타나지 않다는 뜻

### P값과 유의수준 a를 이용한 가설 판정 ###
p값이 0.05 이하인 경우 귀무가설 하에 현실 데이터는 나타나기 어렵고, 귀무가설을 버리고, 대립가설을 선택하는데 이때 평균값이 차이는 *통계적으로 유의미한 차이가 있다* 라고 함. 
이는 대립가설을 지지하는 하나의 증거를 얻었음을 의미

p값이 0.05 상회하는 경우 귀무가설을 기각할 수 없으며, *통계적으로 유의미한 차이는 발견하지 못했다*라는 결과
이는 귀무가설이 옳은 것이 아니라 틀렸다고는 말할 수 없다는 뜻

귀무가설을 기각, 채택할 것인지 판단 경계로 이용하는 값을 **유의수준 a**라고 함

#### 가정검정 흐름 정리 ####

<img width="819" height="566" alt="image" src="https://github.com/user-attachments/assets/6e386ab7-5487-45ed-9d03-03b6a41dfb0c" />

1. 모집단 대상으로 귀무가설과 대립가설 설정
2. 실험이나 관찰로 표본 데이터 얻음
3. 귀무가설 옳은 세계를 상정하여 현실 데이터가 그곳에서 얼마나 잘 나타내는지 p값 평가
4. p값이 0.05보다 작거나 큰 경우를 보고 채택과 보류 판단

## 가설검정 시행 ##
#### 가설검정의 구체적인 계산 ####
p값의 계산 방법은 서로 다름
**이표본 t검정** : 2개 집단 간의 평균값을 비교하는 검정

<img width="799" height="567" alt="image" src="https://github.com/user-attachments/assets/8f776bd6-2f17-45f0-bcb7-9b7f29e7b478" />

귀무가설이 옳은 세계의 표본평균 차이의 근사적 분포를 얻은 후 평균 0의 표준편차를 나눠 표준화한 값인 t값을 주인공으로 삼아 t분포 적용

#### 기각역과 p값 ####
오른쪽 끝이나 왼쪽 끝은 잘 일어나지 않는 드문 현상으로 양 끝 2.5%씩의 발생 범위 고려하여 합쳐서 5%로 잡음
**기각역** 좌우 2.5%씩의 영역을 유의수준 5%인 기각역이라 하고 2.5%가 되는 t값을 2.5% 지점
p값 = 실제 값이 이 귀무가설이 옳을 때의 t분포 내 어디에 위치하는지 구한 뒤, 그 이상의 극단적인 값이 나올 확률(그림의 넓이)을 구한 것
**양측검정** : 양수와 음수 양쪽 모두 고려하는 가설검정 방법
**단측검정** : 어느 한쪽만 고려해 넓이 계산하는 방법
특별한 이유 없는 한 양측검정 이용

<img width="799" height="510" alt="image" src="https://github.com/user-attachments/assets/6b8caf01-4931-4553-bef2-b17a35befe1d" />

#### 신뢰구간과 가설검정의 관계 ####
신뢰구간 = 실제 값인 표본평균으로 모집단평균 추정
가설검정 = 귀무가설 가정해 모집단평균 차이를 0으로 고정했을 때의 표본평균이 어떤 값이 될 것인지 구하는 것

#### 가설검정의 구체적인 예 ####

<img width="814" height="542" alt="image" src="https://github.com/user-attachments/assets/8a625fdc-3878-4a68-8c24-9a5b56277438" />

<img width="790" height="531" alt="image" src="https://github.com/user-attachments/assets/70f43314-1a5a-41c5-95f8-65395ae3ce99" />

1. 표본평균 차이를 구하고, 가설검정에서 쓸 값인 표본크기와 2개 집단을 고려한 비편향표준편차 s를 데이터로부터 산출
2. 이 값으로 t검정에서 이용하는 t값 계산
3. 귀무가설 옳다는 가정하에 t분포 그림. 양측 t값 이하와 이상이 될 확률이 붉은색 표시된 넓이 합을 구하고 이는 p값

## 가설검정 관련 그래프 ##
#### 오차 막대 ####
반복 있는 데이터에서 평균값 계산하여 막대그래프나 산점도로 그릴 때 평균값에 더하여 그 위아래로 오차 막대 함께 그림

<img width="838" height="1056" alt="image" src="https://github.com/user-attachments/assets/92f7381c-d948-41cf-ae49-019c5eafd8f6" />

오차 막대 그릴 때 오차 막대가 무엇을 표시하고 있는지 그래프 범례에 기재
오차 막대가 겹쳐 있다면 통계적으로 유의미한 차이가 없다고 할 수 있음

#### 통계적으로 유의미를 나타내는 표기 ####
*를 사용하는데 *: p<0.05, **: p<0.01, ***: p<0.001
0.01<=p<0.05 일 때 별표 1개, 0.001<=p<0.01 일때는 별표 2개, p<0.001일때 별표 3개
유의미하지 않다는 것을 나타낼 때 N.S

## 제 1종 오류와 제 2종 오류 ##
#### 진실과 판단의 4패턴 ####
진실 = 귀무가설이 옳고 대립가설이 틀린 경우, 귀무가설이 틀리고 대립가설이 옳은 경우

<img width="880" height="330" alt="image" src="https://github.com/user-attachments/assets/99f8830b-ce37-484d-9fb1-a8e7cd337258" />

왼쪽 위 칸 : 귀무가설이 옳을 때 귀무가설을 기각하지 않으므로 옳은 판단
오른쪽 아래 칸 : 대립가설이 옳을 때 대립가설을 채택하므로 옳은 판단
왼쪽 아래 칸 : 귀무가설이 옳음에도 귀무가설을 기각하고 대립가설을 채택하므로 잘못된 판단. 이를 제1종 오류 또는 위양성. 제1종 오류가 일어날 확률은 a로 나타냄
오른쪽 위 칸 : 대립가설이 옳음에도 귀무가설을 기각하지 않는 잘못된 판단. 이를 제2종 오류 또는 위음성. 제2종 오류가 일어날 확률은 b로 나타냄

### 제1종 오류 ###
**제1종 오류** : 실제로 아무 차이가 없음에도 차이가 있다고 판단해 버리는 잘못
p값과 유의수준 a 이용해 제1종 오류가 일어날 확률 통제
정말로 귀무가설에서 얻은 것이라면 p<a일 확률은 a
유의수준 a 값을 미리 정해 둠으로 제1종 오류가 일어날 확률 통제

### 제2종 오류 ###
**제2종 오류** : 정말로 차이가 있는데도 차이가 있다고 말할 수 없어 귀무 가설을 기각하지 않는 판단을 내려 버리는 것
**검정력** : 즉 정말로 차이가 있을 때 차이가 있다고 올바르게 판단할 확률 1-b
일반적으로 검정력 80%로 설정하지만 b는 a와 달리 직접 통제할 수 없음

#### a와 b는 상충관계 ####
a와 b 사이에는 상충관계, 즉 한쪽이 작아지면 다른 한쪽은 커지는 관계
a와 b의 관계는 표본크기 n에 따라 달라짐
표본크기 n이 커지면 a를 고정하면 b가 줄어듬
표본크기 n이 클수록 정말로 차이가 있을 때 그렇다고 판단할 확률인 검정력 1-b가 상승

#### 효과크기를 달리 했을 때 a와 b ####
**효과크기** : 일반적으로 얼마나 큰 효과가 있는지 나타내는 지표

<img width="832" height="610" alt="image" src="https://github.com/user-attachments/assets/fafced8d-dd41-4da5-99a1-9b176e40fa2c" />

2개 집단의 평균값인 경우 단순 평균값의 절대적 차이에만 주목하는 것이 아니라 원래 갖고 있던 모집단의 데이터 퍼짐에 대해 상대적으로 평가한 값 d를 이용
평균값의 차이에 비해 표준편차가 클수록 2개 분포의 겹치는 부분이 커지므로 효과크기 d는 작아지고 평균값이 차이는 검출하기 어려움
평균값이 차이에 비해 표준편차가 작을수록 2개 분포의 겹치는 부분이 작아지므로 효과크기 d는 커진다고 해석

<img width="858" height="620" alt="image" src="https://github.com/user-attachments/assets/71e59c7d-1761-41db-93fd-9a8209b044a8" />

가설검정에서 모집단 대상으로 검출하고 싶은 효과크기 미리 설정하는 것이 바람직
a와 b, 표본크기 n, 효과크기 d의 네 값 중 셋을 결정하면 나머지 하나는 자동으로 정해짐
효과크기 d가 클수록 b는 작아짐
